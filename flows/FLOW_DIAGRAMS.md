# Visual Flow Diagrams

## ğŸ“Š Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RAG SYSTEM ARCHITECTURE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   main.py    â”‚  â† Entry Point (CLI)
                    â”‚ main() - L9  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  RAGSystem   â”‚  â† Main Orchestrator
                    â”‚ __init__ L27 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PDF Processor â”‚  â”‚Vector Store  â”‚  â”‚Embedding &  â”‚
â”‚extract L8    â”‚  â”‚__init__ L16  â”‚  â”‚embedder L39  â”‚
â”‚chunk L30     â”‚  â”‚add_doc L33   â”‚  â”‚model L49     â”‚
â”‚              â”‚  â”‚search L67    â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Loading a PDF - Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PDF LOADING PROCESS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Command:
python main.py load document.pdf
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Parse Command & Initialize                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  main.main() - line 9                                           â”‚
â”‚    â””â”€â†’ Parse arguments (line 33)                                â”‚
â”‚    â””â”€â†’ Create RAGSystem (line 41)                               â”‚
â”‚                                                                 â”‚
â”‚  RAGSystem.__init__() - rag_system.py:27                        â”‚
â”‚    â€¢ Load Sentence Transformer (line 39)                      â”‚
â”‚    â€¢ Connect to Google Gemini API (line 47-49)                  â”‚
â”‚    â€¢ Initialize VectorStore (line 50)                           â”‚
â”‚      â””â”€â†’ VectorStore.__init__() - vector_store.py:16            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Extract Text from PDF                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  main.main() calls rag.load_pdf() - main.py:49                  â”‚
â”‚    â””â”€â†’ RAGSystem.load_pdf() - rag_system.py:52                  â”‚
â”‚        â””â”€â†’ extract_text_from_pdf() - pdf_processor.py:8         â”‚
â”‚                                                                 â”‚
â”‚  Function: extract_text_from_pdf(pdf_path)                     â”‚
â”‚  File: pdf_processor.py, Line: 8                                â”‚
â”‚                                                                 â”‚
â”‚  PDF File                                                       â”‚
â”‚    â”‚                                                            â”‚
â”‚    â”œâ”€â†’ Page 1: "Introduction to machine learning..."           â”‚
â”‚    â”œâ”€â†’ Page 2: "Neural networks are..."                       â”‚
â”‚    â”œâ”€â†’ Page 3: "Deep learning uses..."                        â”‚
â”‚    â””â”€â†’ ...                                                      â”‚
â”‚                                                                 â”‚
â”‚  Result: "Introduction to machine learning... Neural networks   â”‚
â”‚           are... Deep learning uses..."                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Chunk Text                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.load_pdf() calls chunk_text() - rag_system.py:67     â”‚
â”‚    â””â”€â†’ chunk_text() - pdf_processor.py:30                       â”‚
â”‚                                                                 â”‚
â”‚  Function: chunk_text(text, chunk_size=1000, overlap=200)      â”‚
â”‚  File: pdf_processor.py, Line: 30                              â”‚
â”‚                                                                 â”‚
â”‚  Input:  "Very long text..." (10,000 characters)               â”‚
â”‚                                                                 â”‚
â”‚  Process:                                                       â”‚
â”‚    Chunk 1: [0:1000]     "Introduction to machine..."          â”‚
â”‚    Chunk 2: [800:1800]   "...machine learning. Neural..."      â”‚
â”‚    Chunk 3: [1600:2600]  "...Neural networks are..."           â”‚
â”‚    ...                                                          â”‚
â”‚                                                                 â”‚
â”‚  Result: ["Chunk 1...", "Chunk 2...", "Chunk 3...", ...]       â”‚
â”‚          (~10 chunks for 10k chars)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Generate Embeddings                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.load_pdf() - rag_system.py:72                       â”‚
â”‚    â””â”€â†’ self.embedder.encode(chunks)                            â”‚
â”‚                                                                 â”‚
â”‚  Function: embedder.encode()                                    â”‚
â”‚  Location: rag_system.py, Line: 72                              â”‚
â”‚  (Sentence Transformer library method)                         â”‚
â”‚                                                                 â”‚
â”‚  Input:  ["Chunk 1...", "Chunk 2...", ...]                     â”‚
â”‚                                                                 â”‚
â”‚  Process:                                                       â”‚
â”‚    Chunk 1 â†’ [0.23, -0.45, 0.67, ..., 0.12]  (384 numbers)    â”‚
â”‚    Chunk 2 â†’ [0.25, -0.43, 0.65, ..., 0.11]  (384 numbers)    â”‚
â”‚    Chunk 3 â†’ [0.28, -0.41, 0.63, ..., 0.15]  (384 numbers)    â”‚
â”‚    ...                                                          â”‚
â”‚                                                                 â”‚
â”‚  Result: [[0.23, -0.45, ...], [0.25, -0.43, ...], ...]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Store in Vector Database                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.load_pdf() calls vector_store.add_document()        â”‚
â”‚    â””â”€â†’ rag_system.py:78                                         â”‚
â”‚        â””â”€â†’ VectorStore.add_document() - vector_store.py:33     â”‚
â”‚                                                                 â”‚
â”‚  Function: VectorStore.add_document(chunks, embeddings, doc)   â”‚
â”‚  File: vector_store.py, Line: 33                               â”‚
â”‚                                                                 â”‚
â”‚  ChromaDB Collection:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ID              â”‚ Embedding      â”‚ Text        â”‚ Metadataâ”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ doc_chunk_0    â”‚ [0.23, -0.45..]â”‚ "Chunk 1..." â”‚ doc.pdf â”‚  â”‚
â”‚  â”‚ doc_chunk_1    â”‚ [0.25, -0.43..]â”‚ "Chunk 2..." â”‚ doc.pdf â”‚  â”‚
â”‚  â”‚ doc_chunk_2    â”‚ [0.28, -0.41..]â”‚ "Chunk 3..." â”‚ doc.pdf â”‚  â”‚
â”‚  â”‚ ...            â”‚ ...            â”‚ ...         â”‚ ...     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  Saved to: chroma_db/ folder (persistent)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
âœ… PDF Successfully Loaded!
```

---

## ğŸ” Querying - Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUERY PROCESS                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Command:
python main.py query "What is machine learning?"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Parse Command & Check Documents                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  main.main() - line 9                                          â”‚
â”‚    â””â”€â†’ Parse arguments (line 33)                               â”‚
â”‚    â””â”€â†’ Create RAGSystem (line 41)                              â”‚
â”‚    â””â”€â†’ Call rag.query() - main.py:56                           â”‚
â”‚        â””â”€â†’ RAGSystem.query() - rag_system.py:81                â”‚
â”‚            â””â”€â†’ Check if documents loaded (line 92)            â”‚
â”‚                â””â”€â†’ vector_store.get_chunk_count() - vector_store.py:135
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Convert Question to Embedding                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.query() - rag_system.py:96                          â”‚
â”‚    â””â”€â†’ self.embedder.encode(question)                           â”‚
â”‚                                                                 â”‚
â”‚  Function: embedder.encode()                                   â”‚
â”‚  Location: rag_system.py, Line: 96                             â”‚
â”‚  (Sentence Transformer library method)                         â”‚
â”‚                                                                 â”‚
â”‚  Input:  "What is machine learning?"                            â”‚
â”‚                                                                 â”‚
â”‚  Process:                                                       â”‚
â”‚    Question â†’ [0.25, -0.43, 0.65, ..., 0.12]                   â”‚
â”‚              (384 numbers representing the question)            â”‚
â”‚                                                                 â”‚
â”‚  Result: query_vector = [0.25, -0.43, 0.65, ..., 0.12]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Search for Similar Chunks                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.query() calls vector_store.search() - rag_system.py:99
â”‚    â””â”€â†’ VectorStore.search() - vector_store.py:67              â”‚
â”‚                                                                 â”‚
â”‚  Function: VectorStore.search(query_embedding, top_k=3)        â”‚
â”‚  File: vector_store.py, Line: 67                               â”‚
â”‚                                                                 â”‚
â”‚  Process:                                                       â”‚
â”‚    1. Convert embedding to list (line 79)                      â”‚
â”‚    2. Query ChromaDB (line 82)                                 â”‚
â”‚    3. Format results (line 88-97)                              â”‚
â”‚    4. Return top 3                                             â”‚
â”‚                                                                 â”‚
â”‚  Similarity Scores:                                             â”‚
â”‚    Chunk 1: "Machine learning is..." â†’ 0.92 (92% match) âœ“      â”‚
â”‚    Chunk 2: "ML algorithms..."      â†’ 0.85 (85% match) âœ“        â”‚
â”‚    Chunk 3: "AI and ML..."         â†’ 0.82 (82% match) âœ“        â”‚
â”‚    Chunk 4: "Python programming..." â†’ 0.15 (15% match) âœ—       â”‚
â”‚                                                                 â”‚
â”‚  Result: Top 3 chunks with highest similarity                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Build Context Prompt                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.query() - rag_system.py:105                         â”‚
â”‚    â””â”€â†’ Build context string (line 105)                         â”‚
â”‚    â””â”€â†’ Construct prompt (line 108-116)                         â”‚
â”‚                                                                 â”‚
â”‚  Function: RAGSystem.query() (prompt building)                 â”‚
â”‚  File: rag_system.py, Lines: 105-116                           â”‚
â”‚                                                                 â”‚
â”‚  Context:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [From document.pdf]                                      â”‚  â”‚
â”‚  â”‚ Machine learning is a subset of artificial intelligence â”‚  â”‚
â”‚  â”‚ that enables systems to learn from data...              â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ [From document.pdf]                                      â”‚  â”‚
â”‚  â”‚ ML algorithms can be supervised or unsupervised...       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚ [From document.pdf]                                      â”‚  â”‚
â”‚  â”‚ AI and ML are closely related fields...                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  Question: "What is machine learning?"                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Generate Answer with Gemini AI                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAGSystem.query() - rag_system.py:119                         â”‚
â”‚    â””â”€â†’ self.model.generate_content(prompt)                     â”‚
â”‚                                                                 â”‚
â”‚  Function: model.generate_content()                            â”‚
â”‚  Location: rag_system.py, Line: 119                            â”‚
â”‚  (Google Gemini API call)                                      â”‚
â”‚                                                                 â”‚
â”‚  Input to Gemini:                                               â”‚
â”‚  """                                                            â”‚
â”‚  You are a helpful assistant...                                 â”‚
â”‚                                                                 â”‚
â”‚  Context from documents:                                        â”‚
â”‚  [From document.pdf]                                            â”‚
â”‚  Machine learning is a subset of AI...                          â”‚
â”‚  ...                                                            â”‚
â”‚                                                                 â”‚
â”‚  Question: What is machine learning?                            â”‚
â”‚  """                                                            â”‚
â”‚                                                                 â”‚
â”‚  Gemini Processing:                                             â”‚
â”‚    1. Reads context                                             â”‚
â”‚    2. Understands question                                      â”‚
â”‚    3. Generates answer based on context                         â”‚
â”‚                                                                 â”‚
â”‚  Output:                                                        â”‚
â”‚  "Machine learning is a subset of artificial intelligence       â”‚
â”‚   that enables systems to learn and improve from experience    â”‚
â”‚   without being explicitly programmed..."                       â”‚
â”‚                                                                 â”‚
â”‚  Return to main.py (line 56) â†’ Display answer (line 59)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
âœ… Answer Returned to User
```

---

## ğŸ”— Component Interactions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT INTERACTION DIAGRAM                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   User       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Commands
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   main.py    â”‚
                    â”‚ main() L9    â”‚
                    â”‚              â”‚
                    â”‚  â€¢ Parse CLI â”‚
                    â”‚  â€¢ Route cmdsâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Creates
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  RAGSystem   â”‚
                    â”‚ __init__ L27 â”‚
                    â”‚              â”‚
                    â”‚  â€¢ Orchestratesâ”‚
                    â”‚  â€¢ Manages   â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                        â”‚      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                      â”‚
        â–¼                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PDF Processor â”‚                      â”‚Vector Store   â”‚
â”‚extract L8    â”‚                      â”‚__init__ L16   â”‚
â”‚chunk L30     â”‚                      â”‚add_doc L33    â”‚
â”‚              â”‚                      â”‚search L67     â”‚
â”‚â€¢ Extract    â”‚                      â”‚â€¢ Add docs    â”‚
â”‚â€¢ Chunk      â”‚                      â”‚â€¢ Search      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚â€¢ Persist     â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â”‚ Uses
                                             â–¼
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚  ChromaDB    â”‚
                                      â”‚  (Database)  â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  RAGSystem   â”‚
                    â”‚ load_pdf L52 â”‚
                    â”‚ query L81    â”‚
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                        â”‚      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                      â”‚
        â–¼                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Sentence      â”‚                      â”‚Google Gemini â”‚
â”‚Transformer   â”‚                      â”‚              â”‚
â”‚encode L72    â”‚                      â”‚generate L119 â”‚
â”‚encode L96    â”‚                      â”‚              â”‚
â”‚              â”‚                      â”‚â€¢ Generate    â”‚
â”‚â€¢ Encode text â”‚                      â”‚  answers     â”‚
â”‚â€¢ Create      â”‚                      â”‚              â”‚
â”‚  embeddings  â”‚                      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Data Structures Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA TRANSFORMATION PIPELINE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PDF File (binary)
    â”‚
    â–¼
String (text)
    "Introduction to machine learning. Neural networks..."
    â”‚
    â–¼
List[String] (chunks)
    [
      "Introduction to machine learning. Neural...",
      "...learning. Neural networks are...",
      "...networks are computational models..."
    ]
    â”‚
    â–¼
List[np.ndarray] (embeddings)
    [
      array([0.23, -0.45, 0.67, ..., 0.12]),  # 384 numbers
      array([0.25, -0.43, 0.65, ..., 0.11]),  # 384 numbers
      array([0.28, -0.41, 0.63, ..., 0.15])   # 384 numbers
    ]
    â”‚
    â–¼
ChromaDB Storage
    {
      ids: ["doc_chunk_0", "doc_chunk_1", ...],
      embeddings: [[0.23, -0.45, ...], [0.25, -0.43, ...], ...],
      documents: ["Chunk 1...", "Chunk 2...", ...],
      metadatas: [{"document_name": "doc.pdf"}, ...]
    }
    â”‚
    â–¼
Query Time:
    Question String
        â”‚
        â–¼
    Query Vector (np.ndarray)
        â”‚
        â–¼
    Search Results: List[Tuple]
        [
          ("Chunk text...", 0.92, "doc.pdf"),  # (text, score, doc)
          ("Chunk text...", 0.85, "doc.pdf"),
          ("Chunk text...", 0.82, "doc.pdf")
        ]
        â”‚
        â–¼
    Prompt String
        "Context: ...\nQuestion: ..."
        â”‚
        â–¼
    Answer String
        "Machine learning is..."
```

---

## ğŸ¯ Similarity Search Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HOW SIMILARITY SEARCH WORKS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Stored Chunks in Database:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chunk 1: "Machine learning is a subset of AI"                   â”‚
â”‚ Vector: [0.23, -0.45, 0.67, ..., 0.12]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chunk 2: "Python is a programming language"                     â”‚
â”‚ Vector: [0.89, 0.12, -0.34, ..., -0.56]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chunk 3: "Deep learning uses neural networks"                   â”‚
â”‚ Vector: [0.28, -0.41, 0.63, ..., 0.15]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Question:
"What is machine learning?"
Vector: [0.25, -0.43, 0.65, ..., 0.11]

Similarity Calculation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question vs Chunk 1:                                              â”‚
â”‚   Cosine Similarity = 0.92 (92% similar) âœ“ TOP MATCH            â”‚
â”‚                                                                   â”‚
â”‚ Question vs Chunk 3:                                              â”‚
â”‚   Cosine Similarity = 0.78 (78% similar) âœ“ RELEVANT             â”‚
â”‚                                                                   â”‚
â”‚ Question vs Chunk 2:                                              â”‚
â”‚   Cosine Similarity = 0.15 (15% similar) âœ— NOT RELEVANT         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Results (top_k=3):
1. Chunk 1 (score: 0.92) â† Most relevant
2. Chunk 3 (score: 0.78) â† Relevant
3. Chunk 2 (score: 0.15) â† Less relevant, but included
```

---

## ğŸ”„ Complete End-to-End Flow

```
START
  â”‚
  â”œâ”€â†’ [User] python main.py load doc.pdf
  â”‚
  â”œâ”€â†’ [main.py] main() - line 9
  â”‚     â””â”€â†’ Parse command (line 33)
  â”‚     â””â”€â†’ Create RAGSystem() (line 41)
  â”‚           â””â”€â†’ RAGSystem.__init__() - rag_system.py:27
  â”‚                 â€¢ Load Sentence Transformer (line 39)
  â”‚                 â€¢ Connect Gemini API (line 47-49)
  â”‚                 â€¢ VectorStore.__init__() - vector_store.py:16
  â”‚
  â”œâ”€â†’ [RAGSystem] load_pdf("doc.pdf") - rag_system.py:52
  â”‚     â”‚
  â”‚     â”œâ”€â†’ [PDF Processor] extract_text_from_pdf() - pdf_processor.py:8
  â”‚     â”‚     â””â”€â†’ "Full text content..."
  â”‚     â”‚
  â”‚     â”œâ”€â†’ [PDF Processor] chunk_text() - pdf_processor.py:30
  â”‚     â”‚     â””â”€â†’ ["Chunk 1", "Chunk 2", ...]
  â”‚     â”‚
  â”‚     â”œâ”€â†’ [Sentence Transformer] embedder.encode() - rag_system.py:72
  â”‚     â”‚     â””â”€â†’ [[0.23, ...], [0.25, ...], ...]
  â”‚     â”‚
  â”‚     â””â”€â†’ [Vector Store] add_document() - vector_store.py:33
  â”‚           â””â”€â†’ Persisted to disk (ChromaDB)
  â”‚
  â””â”€â†’ âœ… PDF Loaded
        â”‚
        â”œâ”€â†’ [User] python main.py query "Question?"
        â”‚
        â”œâ”€â†’ [main.py] main() - line 9
        â”‚     â””â”€â†’ rag.query() - main.py:56
        â”‚           â””â”€â†’ RAGSystem.query() - rag_system.py:81
        â”‚                 â”‚
        â”‚                 â”œâ”€â†’ [Sentence Transformer] embedder.encode() - rag_system.py:96
        â”‚                 â”‚     â””â”€â†’ [0.25, -0.43, ...]
        â”‚                 â”‚
        â”‚                 â”œâ”€â†’ [Vector Store] search() - vector_store.py:67
        â”‚                 â”‚     â””â”€â†’ Top 3 chunks found
        â”‚                 â”‚
        â”‚                 â”œâ”€â†’ [RAGSystem] Build prompt - rag_system.py:105-116
        â”‚                 â”‚     â””â”€â†’ Context + Question
        â”‚                 â”‚
        â”‚                 â””â”€â†’ [Gemini API] model.generate_content() - rag_system.py:119
        â”‚                       â””â”€â†’ "Answer text..."
        â”‚
        â””â”€â†’ âœ… Answer displayed (main.py:59)
```

---

## ğŸ’¾ Persistence Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA PERSISTENCE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Session 1:
  Load PDF â†’ ChromaDB â†’ Save to chroma_db/ folder
    â”‚
    â””â”€â†’ RAGSystem.load_pdf() - rag_system.py:78
        â””â”€â†’ VectorStore.add_document() - vector_store.py:33
            â””â”€â†’ ChromaDB saves automatically (line 60-65)
    â”‚
    â””â”€â†’ chroma_db/
        â”œâ”€â”€ chroma.sqlite3 (metadata)
        â””â”€â”€ [collection_id]/
            â”œâ”€â”€ data_level0.bin
            â”œâ”€â”€ header.bin
            â””â”€â”€ ...

Session 2 (Restart):
  Start RAGSystem â†’ ChromaDB loads from chroma_db/
    â”‚
    â””â”€â†’ RAGSystem.__init__() - rag_system.py:50
        â””â”€â†’ VectorStore.__init__() - vector_store.py:16
            â””â”€â†’ chromadb.PersistentClient() loads existing data (line 24)
    â”‚
    â””â”€â†’ All previous documents available!
        â”‚
        â””â”€â†’ Can query immediately without reloading

Clear Command:
  python main.py clear
    â”‚
    â””â”€â†’ main.main() - main.py:75
        â””â”€â†’ RAGSystem.clear() - rag_system.py:131
            â””â”€â†’ VectorStore.clear() - vector_store.py:101
                â””â”€â†’ Deletes collection (line 105) â†’ chroma_db/ folder cleared
```

---

## ğŸ“‹ Function Reference Table

Quick reference for all key functions with their file locations and line numbers:

| Function Name | File | Line | Purpose |
|--------------|------|------|---------|
| `main()` | main.py | 9 | CLI entry point, parses commands |
| `RAGSystem.__init__()` | rag_system.py | 27 | Initialize RAG system, load models |
| `RAGSystem.load_pdf()` | rag_system.py | 52 | Load and process PDF file |
| `RAGSystem.query()` | rag_system.py | 81 | Answer questions using RAG |
| `RAGSystem.list_documents()` | rag_system.py | 122 | List all loaded documents |
| `RAGSystem.clear()` | rag_system.py | 131 | Clear all documents |
| `extract_text_from_pdf()` | pdf_processor.py | 8 | Extract text from PDF file |
| `chunk_text()` | pdf_processor.py | 30 | Split text into chunks |
| `VectorStore.__init__()` | vector_store.py | 16 | Initialize ChromaDB |
| `VectorStore.add_document()` | vector_store.py | 33 | Store chunks and embeddings |
| `VectorStore.search()` | vector_store.py | 67 | Search for similar chunks |
| `VectorStore.clear()` | vector_store.py | 101 | Clear all stored data |
| `VectorStore.get_document_list()` | vector_store.py | 114 | Get list of document names |
| `VectorStore.get_chunk_count()` | vector_store.py | 135 | Get total chunk count |

### External Library Functions Used:

| Function/Method | Library | Used In | Line |
|----------------|---------|---------|------|
| `embedder.encode()` | Sentence Transformers | rag_system.py | 72, 96 |
| `model.generate_content()` | Google Gemini API | rag_system.py | 119 |
| `chromadb.PersistentClient()` | ChromaDB | vector_store.py | 24 |

---

*These diagrams show the complete flow of data and control through your RAG system with function names and line numbers for easy code navigation!*

